# pnpm

## 非扁平化依赖

使用 npm 或 Yarn Classic 安装依赖项时，所有的包都被提升到模块目录的根目录。 这样就导致了一个问题，源码可以直接访问和修改依赖，而不是作为只读的项目依赖。

`node_module` 下的依赖**软链接**接到 `.pnpm` 中的依赖，`.pnpm` **硬链接**到 `.pnpm_store`

## 节省空间

使用 npm 时，依赖每次被不同的项目使用，都会重复安装一次。 而在使用 pnpm 时，依赖会被存储在内容可寻址的存储中

## 安装速度

1. 依赖分析。仓库中没有的依赖都被识别并获取到仓库
2. 目录结构计算，`node_modules` 目录结构是根据依赖计算出来的
3. 链接依赖项。所有以前安装过的依赖都会直接从存储区中获取然后链接到 `node_modules`
