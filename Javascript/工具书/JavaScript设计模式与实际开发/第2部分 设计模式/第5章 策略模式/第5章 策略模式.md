- [ç­–ç•¥æ¨¡å¼](#ç­–ç•¥æ¨¡å¼)
  - [1. ä½¿ç”¨ç­–ç•¥æ¨¡å¼è®¡ç®—å¥–é‡‘](#1-ä½¿ç”¨ç­–ç•¥æ¨¡å¼è®¡ç®—å¥–é‡‘)
  - [2. ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®ç°ç¼“åŠ¨åŠ¨ç”»](#2-ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®ç°ç¼“åŠ¨åŠ¨ç”»)
  - [3. è¡¨å•éªŒè¯](#3-è¡¨å•éªŒè¯)

## ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼çš„å®šä¹‰æ˜¯ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢

### 1. ä½¿ç”¨ç­–ç•¥æ¨¡å¼è®¡ç®—å¥–é‡‘

```js
var strategies = {
  S: function (salary) {
    return salary * 4;
  },
  A: function (salary) {
    return salary * 3;
  },
  B: function (salary) {
    return salary * 2;
  }
};

var calculateBonus = function (level, salary) {
  return strategies[level](salary);
};
console.log(calculateBonus('S', 20000)); // è¾“å‡ºï¼š80000
console.log(calculateBonus('A', 10000)); // è¾“å‡ºï¼š30000
```

### 2. ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®ç°ç¼“åŠ¨åŠ¨ç”»

```html
<body>
  <div style="position: absolute; background: blue" id="div">æˆ‘æ˜¯ div</div>
</body>

<script>
  var tween = {
    linear: function (t, b, c, d) {
      return (c * t) / d + b;
    },
    easeIn: function (t, b, c, d) {
      return c * (t /= d) * t + b;
    },
    strongEaseIn: function (t, b, c, d) {
      return c * (t /= d) * t * t * t * t + b;
    },
    strongEaseOut: function (t, b, c, d) {
      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    sineaseIn: function (t, b, c, d) {
      return c * (t /= d) * t * t + b;
    },
    sineaseOut: function (t, b, c, d) {
      return c * ((t = t / d - 1) * t * t + 1) + b;
    }
  };

  var Animate = function (dom) {
    this.dom = dom; // è¿›è¡Œè¿åŠ¨çš„ dom èŠ‚ç‚¹
    this.startTime = 0; // åŠ¨ç”»å¼€å§‹æ—¶é—´
    this.startPos = 0; // åŠ¨ç”»å¼€å§‹æ—¶ï¼Œdom èŠ‚ç‚¹çš„ä½ç½®ï¼Œå³ dom çš„åˆå§‹ä½ç½®
    this.endPos = 0; // åŠ¨ç”»ç»“æŸæ—¶ï¼Œdom èŠ‚ç‚¹çš„ä½ç½®ï¼Œå³ dom çš„ç›®æ ‡ä½ç½®
    this.propertyName = null; // dom èŠ‚ç‚¹éœ€è¦è¢«æ”¹å˜çš„ css å±æ€§å
    this.easing = null; // ç¼“åŠ¨ç®—æ³•
    this.duration = null; // åŠ¨ç”»æŒç»­æ—¶é—´
  };

  Animate.prototype.start = function (propertyName, endPos, duration, easing) {
    this.startTime = +new Date(); // åŠ¨ç”»å¯åŠ¨æ—¶é—´
    this.startPos = this.dom.getBoundingClientRect()[propertyName]; // dom èŠ‚ç‚¹åˆå§‹ä½ç½®
    this.propertyName = propertyName; // dom èŠ‚ç‚¹éœ€è¦è¢«æ”¹å˜çš„ CSS å±æ€§å
    this.endPos = endPos; // dom èŠ‚ç‚¹ç›®æ ‡ä½ç½®
    this.duration = duration; // åŠ¨ç”»æŒç»­äº‹ä»¶
    this.easing = tween[easing]; // ç¼“åŠ¨ç®—æ³•
    var self = this;
    var timeId = setInterval(function () {
      // å¯åŠ¨å®šæ—¶å™¨ï¼Œå¼€å§‹æ‰§è¡ŒåŠ¨ç”»
      if (self.step() === false) {
        // å¦‚æœåŠ¨ç”»å·²ç»“æŸï¼Œåˆ™æ¸…é™¤å®šæ—¶å™¨
        clearInterval(timeId);
      }
    }, 19);
  };

  Animate.prototype.step = function () {
    var t = +new Date(); // å–å¾—å½“å‰æ—¶é—´
    if (t >= this.startTime + this.duration) {
      // (1)
      this.update(this.endPos); // æ›´æ–°å°çƒçš„ CSS å±æ€§å€¼
      return false;
    }
    var pos = this.easing(
      t - this.startTime,
      this.startPos,
      this.endPos - this.startPos,
      this.duration
    );
    // pos ä¸ºå°çƒå½“å‰ä½ç½®
    this.update(pos); // æ›´æ–°å°çƒçš„ CSS å±æ€§å€¼
  };

  Animate.prototype.update = function (pos) {
    this.dom.style[this.propertyName] = pos + 'px';
  };

  var div = document.getElementById('div');
  var animate = new Animate(div);
  animate.start('left', 500, 2000, 'sineaseIn');
</script>
```

### 3. è¡¨å•éªŒè¯

```html
<script>
  var strategies = {
    isNonEmpty: function (value, errorMsg) {
      // ä¸ä¸ºç©º
      if (value === '') {
        return errorMsg;
      }
    },
    minLength: function (value, length, errorMsg) {
      // é™åˆ¶æœ€å°é•¿åº¦
      if (value.length < length) {
        return errorMsg;
      }
    },
    isMobile: function (value, errorMsg) {
      // æ‰‹æœºå·ç æ ¼å¼
      if (!/(^1[3|5|8][0-9]{9}$)/.test(value)) {
        return errorMsg;
      }
    }
  };

  var Validator = function () {
    this.cache = []; // ä¿å­˜æ ¡éªŒè§„åˆ™
  };

  Validator.prototype.add = function (value, rule, errorMsg) {
    var ary = rule.split(':'); // æŠŠ strategy å’Œå‚æ•°åˆ†å¼€
    this.cache.push(function () {
      // æŠŠæ ¡éªŒçš„æ­¥éª¤ç”¨ç©ºå‡½æ•°åŒ…è£…èµ·æ¥ï¼Œå¹¶ä¸”æ”¾å…¥ cache
      var strategy = ary.shift(); // ç”¨æˆ·æŒ‘é€‰çš„ strategy
      ary.unshift(value); // æŠŠ input çš„ value æ·»åŠ è¿›å‚æ•°åˆ—è¡¨
      ary.push(errorMsg); // æŠŠ errorMsg æ·»åŠ è¿›å‚æ•°åˆ—è¡¨
      return strategies[strategy].apply(this, ary);
    });
  };

  Validator.prototype.start = function () {
    for (var i = 0, validatorFunc; (validatorFunc = this.cache[i++]); ) {
      var msg = validatorFunc(); // å¼€å§‹æ ¡éªŒï¼Œå¹¶å–å¾—æ ¡éªŒåçš„è¿”å›ä¿¡æ¯
      if (msg) {
        // å¦‚æœæœ‰ç¡®åˆ‡çš„è¿”å›å€¼ï¼Œè¯´æ˜æ ¡éªŒæ²¡æœ‰é€šè¿‡
        return msg;
      }
    }
  };

  var validataFunc = function () {
    var validator = new Validator(); // åˆ›å»ºä¸€ä¸ª validator å¯¹è±¡
    /***************æ·»åŠ ä¸€äº›æ ¡éªŒè§„åˆ™****************/
    // validator.add('', 'isNonEmpty', 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');
    validator.add('123', 'minLength:6', 'å¯†ç é•¿åº¦ä¸èƒ½å°‘äº 6 ä½');
    // validator.add(registerForm.phoneNumber, 'isMobile', 'æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®');
    var errorMsg = validator.start(); // è·å¾—æ ¡éªŒç»“æœ
    return errorMsg; // è¿”å›æ ¡éªŒç»“æœ
  };

  const errorMsg = validataFunc();
  if (errorMsg) {
    console.log('ğŸš©  -> file: index.html -> line 148 -> ', errorMsg);
  }
</script>
```
