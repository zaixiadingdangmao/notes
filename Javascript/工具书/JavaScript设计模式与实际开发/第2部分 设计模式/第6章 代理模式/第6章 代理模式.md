- [ä»£ç†æ¨¡å¼](#ä»£ç†æ¨¡å¼)
  - [1. å›¾ç‰‡ä»£ç†](#1-å›¾ç‰‡ä»£ç†)
  - [2. è™šæ‹Ÿä»£ç†](#2-è™šæ‹Ÿä»£ç†)
  - [3. ç¼“å­˜ä»£ç†çš„ä¾‹å­](#3-ç¼“å­˜ä»£ç†çš„ä¾‹å­)
  - [4. ç”¨é«˜é˜¶å‡½æ•°åŠ¨æ€åˆ›å»ºä»£ç†](#4-ç”¨é«˜é˜¶å‡½æ•°åŠ¨æ€åˆ›å»ºä»£ç†)

## ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®

### 1. å›¾ç‰‡ä»£ç†

```html
<body></body>
<script>
  var myImage = (function () {
    var imgNode = document.createElement('img');
    document.body.appendChild(imgNode);
    return {
      setSrc: function (src) {
        imgNode.src = src;
      }
    };
  })();

  var proxyImage = (function () {
    var img = new Image();
    img.onload = function () {
      console.log('ğŸš©  -> file: index.html -> line 16 -> ', 'åŠ è½½å®Œæ¯•');
      myImage.setSrc(this.src);
    };

    return {
      setSrc: function (src) {
        myImage.setSrc('./1.jpg');
        img.src = src;
      }
    };
  })();

  proxyImage.setSrc('https://photo.16pic.com/00/71/70/16pic_7170428_b.jpg');
</script>
```

### 2. è™šæ‹Ÿä»£ç†

```html
<body></body>
<script>
  var miniConsole = (function () {
    var cache = [];
    var handler = function (ev) {
      if (ev.keyCode === 113) {
        var script = document.createElement('script');
        script.onload = function () {
          for (var i = 0, fn; (fn = cache[i++]); ) {
            fn();
          }
        };
        script.src = './index.js';
        document.getElementsByTagName('head')[0].appendChild(script);
        document.body.removeEventListener('keydown', handler); // åªåŠ è½½ä¸€æ¬¡ miniConsole.js
      }
    };
    document.body.addEventListener('keydown', handler, false);
    return {
      log: function () {
        var args = arguments;
        cache.push(function () {
          return miniConsole.log.apply(miniConsole, args);
        });
      }
    };
  })();

  miniConsole.log(11); // å¼€å§‹æ‰“å° log
</script>
```

### 3. ç¼“å­˜ä»£ç†çš„ä¾‹å­

```js
var mult = function () {
  console.log('å¼€å§‹è®¡ç®—ä¹˜ç§¯');
  var a = 1;
  for (var i = 0, l = arguments.length; i < l; i++) {
    a = a * arguments[i];
  }
  return a;
};

var proxyMult = (function () {
  var cache = {};
  return function () {
    var args = Array.prototype.join.call(arguments, ',');
    if (args in cache) {
      return cache[args];
    }
    return (cache[args] = mult.apply(this, arguments));
  };
})();

proxyMult(1, 2, 3, 4); // è¾“å‡ºï¼š24
proxyMult(1, 2, 3, 4); // è¾“å‡ºï¼š24
```

### 4. ç”¨é«˜é˜¶å‡½æ•°åŠ¨æ€åˆ›å»ºä»£ç†

```js
/**************** è®¡ç®—ä¹˜ç§¯ *****************/
var mult = function () {
  var a = 1;
  for (var i = 0, l = arguments.length; i < l; i++) {
    a = a * arguments[i];
  }
  return a;
};
/**************** è®¡ç®—åŠ å’Œ *****************/
var plus = function () {
  var a = 0;
  for (var i = 0, l = arguments.length; i < l; i++) {
    a = a + arguments[i];
  }
  return a;
};
/**************** åˆ›å»ºç¼“å­˜ä»£ç†çš„å·¥å‚ *****************/

var createProxyFactory = function (fn) {
  var cache = {};
  return function () {
    var args = Array.prototype.join.call(arguments, ',');
    if (args in cache) {
      return cache[args];
    }
    return (cache[args] = fn.apply(this, arguments));
  };
};
var proxyMult = createProxyFactory(mult),
  proxyPlus = createProxyFactory(plus);
alert(proxyMult(1, 2, 3, 4)); // è¾“å‡ºï¼š24
alert(proxyMult(1, 2, 3, 4)); // è¾“å‡ºï¼š24
alert(proxyPlus(1, 2, 3, 4)); // è¾“å‡ºï¼š10
alert(proxyPlus(1, 2, 3, 4)); // è¾“å‡ºï¼š10
```