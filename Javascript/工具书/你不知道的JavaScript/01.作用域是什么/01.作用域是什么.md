- [作用域是什么](#作用域是什么)
  - [1. 编译原理](#1-编译原理)
  - [2. 区分 LHS 和 RHS](#2-区分-lhs-和-rhs)
  - [3. 异常](#3-异常)
  - [4. 小结](#4-小结)

## 作用域是什么

### 1. 编译原理

一般分为三个阶段：

1. 编译
2. 解析
3. 代码生成

### 2. 区分 LHS 和 RHS

RHS 查询与简单地查找某个变量的值别无二致，而 LHS 查询则是试图找到变量的容器本身，从而可以对其赋值。

RHS 可以理解成 取到它的源值

```js
console.log(a);
```

其中对 a 的一个引用是一个 RHS 引用，因为这里 a 并没有赋予任何值。相应地，需要查找并取得 a 的值，这样才能将值传递给 console.log(..)。

```js
a = 2;
```

这里对 a 的引用则是 LHS 引用，因为实际上我们并不关心当前的值是什么，只是想要为= 2 这个赋值操作找到一个目标。

### 3. 异常

为什么区分 LHS 和 RHS 是一件重要的事情？

```js
function foo(a) {
  console.log(a + b); // RHS 第一次查询，无法找到变量。报错：ReferenceError
  b = a;
}
foo(2);
```

第一次对 b 进行 RHS 查询时是无法找到该变量的。也就是说，这是一个“未声明”的变量，因为在任何相关的作用域中都无法找到它。擎就会抛出 ReferenceError
异常。值得注意的是，ReferenceError 是非常重要的异常类型。

```js
function foo(a) {
  b = a; // LHS 第一次查询，并不关心有没有值，引擎会帮我们在全局创建一个
  console.log(a + b);
}
foo(2);
```

### 4. 小结

作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行**赋值**，那么就会使用 LHS 查询；如果目的是**获取**变量的值，就会使用 RHS 查询。
